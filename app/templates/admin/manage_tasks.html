{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block styles %}
{{ super() }}
<script src="//code.jquery.com/jquery-3.4.1.min.js"
			  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
			  crossorigin="anonymous"></script>
<link rel="stylesheet" href="//cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
<script src="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
{% endblock %}

{% block app_content %}
<h1>Manage Tasks</h1>
<div class="row">
	<div class="col-md-4">
		{{ wtf.quick_form(form, button_map={'assign': 'primary', 'delete': 'danger'}) }}
	</div>
</div>
<br>
<h1>Task Overview</h1>
<article class="overview">
	<table id="tasks" class="table table-striped">
		<thead class="thead-dark">
			<th scope="col">Task ID</th>
			<th scope="col">Dataset Name</th>
			<th scope="col">Username</th>
			<th scope="col">Status</th>
			<th scope="col">Completed On</th>
		</thead>
		{% for task in tasks %}
		<tr>
			<th scope="row">{{ task.id }}</th>
			<td>{{ task.dataset.name }}</td>
			<td>{{ task.user.username }}</td>
			<td>{% if task.done %}Completed{% else %}Pending{% endif %}</td>
			<td>{% if task.done %}{{ task.annotated_on }}{% else %}{% endif %}</td>
		</tr>
		{% endfor %}
		</tr>
	</table>
</article>

<script>$(document).ready(function() { $('#tasks').DataTable(); });</script>
{% endblock %}
